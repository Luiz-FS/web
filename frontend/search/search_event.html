<white-toolbar title="PESQUISAR" primary-button-icon="close"></white-toolbar>

<div style="overflow: scroll;">
    <div class="search-mobile-options-title" id="search-title" layout="row" layout-align="space-between">
        <b>Pesquisa avançada</b>
        <md-icon md-colors="{color: 'light-green-500'}" ng-if="!searchCtrl.hasNotSearched"
            ng-click="searchCtrl.hasNotSearched = true; searchCtrl.clearFilters(); searchCtrl.refreshPreviousKeyword(); searchCtrl.search_keyword = ''">
            arrow_drop_down
        </md-icon>
    </div>
    <div layout="row" layout-align="center" class="search-mobile-content" ng-if="searchCtrl.hasNotSearched">
        <form layout="row" layout-align="center center">
            <md-input-container class="search-mobile-input" md-no-float>
                <p class="search-event-title">INSTITUIÇÃO</p>
                <input type="text" class="search-event-input" ng-model="searchCtrl.search_keyword"
                placeholder="Digite o nome ou sigla da instituição" ng-change="searchCtrl.setHasChanges()"/>
            </md-input-container>
        </form>
    </div>
    <div ng-if="searchCtrl.hasNotSearched">
        <div layout="column" layout-align="center center" class="search-mobile-options" style="overflow: scroll">
            <md-input-container>
                <md-select ng-model="searchCtrl.searchState" placeholder="ESTADO" class="search-by-mobile">
                    <md-option ng-repeat="state in searchCtrl.brazilianFederalStates" ng-value="state.nome" ng-click="searchCtrl.searchBy(state.nome, 'event')">
                        {{state.nome}}
                    </md-option>
                </md-select>
            </md-input-container>
        </div>
        <div layout="row" layout-align="end center" class="search-mobile-action-buttons">
            <md-button md-colors="{background:'grey-500'}" ng-click="searchCtrl.leaveMobileSearchPage()">
                CANCELAR
            </md-button>
            <md-button md-colors="{background:'teal-500'}" ng-click="searchCtrl.search($event, 'event')" ng-disabled="!searchCtrl.hasChanges">
                PESQUISAR
            </md-button>
        </div>
    </div>
    <div ng-if="!searchCtrl.hasNotSearched">
        <div ng-if="searchCtrl.events.length > 0">
            <div ng-repeat="event in searchCtrl.events | orderBy:'start_time'"
            ng-click="searchCtrl.goToEvent(event)">
                <event-card event="event"></event-card>
            </div>
        </div>
        <div ng-if="searchCtrl.events.length === 0" class="empty-card-as-search-result">
            <is-empty-card text="Nenhum evento encontrado."></is-empty-card>
        </div>
    </div>
</div>