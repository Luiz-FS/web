<div class="container-resp box">
  <div flex layout="column">
    <load-circle flex add-layout-fill="true" ng-if="eventCtrl.isLoadingEvents"></load-circle>
    <div ng-if="!eventCtrl.isLoadingEvents" class="centralized-event-content">
      <md-content ng-if="eventCtrl.months.length > 0" layout="row" class="select-container">
        <md-select name="month" ng-model="eventCtrl.selectedMonth"
          ng-change="eventCtrl.loadFilteredEvents()" class="select-months">
          <md-option ng-repeat="month in eventCtrl.months" ng-value="month">
              {{month.month_name}}
          </md-option>
        </md-select>
        <span class="space-between-filters"></span>
        <md-select name="year" ng-model="eventCtrl.selectedYear"
          ng-change="eventCtrl.loadFilteredEvents()" class="select-years">
          <md-option ng-repeat="year in eventCtrl.years" ng-value="year">
              {{year}}
          </md-option>
        </md-select>
      </md-content>
      <is-empty-card ng-if="eventCtrl.eventsByDay.length === 0"
                     text="Nenhum evento a ser exibido">
      </is-empty-card>
    </div>
    <md-content id="content" class="custom-scrollbar box">
      <div ng-repeat="events in eventCtrl.eventsByDay"
        ng-if="eventCtrl.events.length > 0" class="events-grid events-grid-position">
          <div class="events-day-position event-day-properties">
            <span>{{events.day}}</span>
            <p class="event-weekday">
              {{eventCtrl.test(events.events[0])}}
              {{events.events[0].start_time | amUtc | amDateFormat:'ddd' }}
            </p>
          </div>
          <div ng-repeat="event in events.events | orderBy:'start_time'" class="event-position"
            ng-click="eventCtrl.goToEvent(event)">
                <md-card>
                  <div class="event-preview event-preview-border" md-colors="{color: eventCtrl.getProfileColor(event)}">
                    <img class="md-card-image event-preview-image" ng-src="{{event.photo_url}}">
                    <div class="highlight">
                        <div class="event-title">
                          <b>{{ event.title | uppercase}}</b>
                        </div>
                        <div class="event-subtitle">
                            {{ event.start_time | amUtc | amLocal | amDateFormat:'HH:mm'  }}
                            {{ event.address.city ? ' | ' + event.address.city : ''}}
                            <p class="event-inst-name"
                              ng-if="!eventCtrl.user.isMember(event.institution_key)">
                                {{event.institution_name || uppercase}}
                          </p>
                        </div>
                    </div>
                  </div>
                </md-card>
          </div>
          <md-divider class="event-divider"></md-divider>
      </div>
    </md-content>
  </div>
</div>
<md-fab-speed-dial ng-if="!eventCtrl.institutionKey"
  id="fab-new-event" class="md-fab-bottom-right" hide-gt-sm>
  <md-fab-trigger>
    <md-button aria-label="menu" ng-click="eventCtrl.newEvent()"
    class="md-fab md-primary create-event-button">
      <md-icon>add</md-icon>
    </md-button>
  </md-fab-trigger>
</md-fab-speed-dial>