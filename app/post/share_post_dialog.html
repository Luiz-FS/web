<md-dialog flex flex-gt-md="40" layout="row">
  <md-card flex="100">
    <md-card-header>
      <md-card-avatar>
        <img ng-src="{{ sharePostCtrl.user.current_institution.photo_url }}" class="md-user-avatar"/>
      </md-card-avatar>
      <md-card-header-text>
        <span class="md-title">{{ sharePostCtrl.user.current_institution.name }}</span>
        <span class="md-subhead">por {{ sharePostCtrl.user.name }}</span>
      </md-card-header-text>
      <md-button class="md-icon-button" ng-click="sharePostCtrl.cancelDialog()">
        <md-icon>close</md-icon>
      </md-button>
    </md-card-header>
    <md-card-content layout="column">
      <md-input-container>
        <label>Título</label>
        <input ng-model="sharePostCtrl.newPost.title" md-maxlength="100" maxlength="100" 
        placeholder="Escreva aqui uma nova publicação">
      </md-input-container>

      <md-input-container ng-show="sharePostCtrl.newPost.title">
        <label>Mensagem</label>
        <textarea style="max-height: 180px;overflow-y:auto;resize:none;" ng-model="sharePostCtrl.newPost.text" 
        rows="4" md-select-on-focus required="true">
        </textarea>
      </md-input-container>

      <md-card md-colors="{background: 'default-grey-100'}">
        <md-card-header>
          <md-card-avatar>
            <img ng-src="{{ sharePostCtrl.post.institution_image }}" class="md-user-avatar"/>
          </md-card-avatar>
          <md-card-header-text>
            <span class="md-title">{{ sharePostCtrl.post.institution_name }}</span>
            <span class="md-subhead">por {{ sharePostCtrl.post.author }}</span>
          </md-card-header-text>
        </md-card-header>
        <md-card-content layout="column">
          <div class="image-view" ng-if="sharePostCtrl.showImage()">
            <img class="md-card-image" style="border-radius: 3%;" ng-src="{{ sharePostCtrl.post.photo_url }}"/>
          </div>
          <p></p>
          <span class="md-text hyperlink">{{ sharePostCtrl.post.title }}</span>
          <span class="md-subhead" ng-bind-html="sharePostCtrl.post.text"></span>
        </md-card-content>
      </md-card>

    </md-card-content>
    <md-dialog-actions layout="row" ng-show="sharePostCtrl.newPost.title">
      <span flex></span>
      <md-button class="md-icon-button" ng-click="sharePostCtrl.share()" ng-disabled="!sharePostCtrl.isPostValid()">
        <md-icon>send</md-icon>
      </md-button>
    </md-dialog-actions>
  </md-card>
</md-dialog>