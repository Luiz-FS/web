    <!-- TIMELINE -->
      <div flex>
        <div ng-if="!institution">
          <create-post flex user="postDetailsCtrl.user" is-dialog="false"></create-post>
        </div>
        <md-card ng-if="posts.length == 0">
          <md-content layout-align="center center" layout="column"><h4>Esta instituição ainda não possui publicações.</h4></md-content>
        </md-card>
        <md-card ng-repeat="post in posts | orderBy:'date':true" ng-if="posts.length > 0">
          <md-card-header>
            <md-card-avatar>
              <a href ng-click="postDetailsCtrl.goToInstitution(post.institution_key)">
                <img ng-src="{{ post.institution_image }}" role="button" class="md-user-avatar"/>
              </a>
            </md-card-avatar>
            <md-card-header-text>
              <div>
                <a href class="md-title hyperlink" ng-click="postDetailsCtrl.goToInstitution(post.institution_key)">{{ post.institution_name }}</a>
              </div>
              <span class="md-subhead">por {{ post.author }} em {{ post.publication_date | date: 'dd-MM-yyyy'}} às {{post.publication_date | date:'HH:mm:ss'}}</span>
            </md-card-header-text>
          </md-card-header>
          <img ng-src="{{ post.photo_url }}" class="md-card-image">
          <md-card-title>
            <md-card-title-text>
               <span ng-if="!postDetailsCtrl.isDeleted(post)" class="md-headline" ng-bind-html="postDetailsCtrl.recognizeUrl(post).title">{{postDetailsCtrl.recognizeUrl(post).title}}</span>
            </md-card-title-text>
          </md-card-title>
          <md-card-content>
            <p ng-if="postDetailsCtrl.isDeleted(post)">
              Esta publicação foi removida pelo usuário {{post.last_modified_by}} em
              {{post.last_modified_date | date: 'dd-MM-yyyy'}} às {{post.last_modified_date | date: 'HH:mm:ss'}}
            </p>
            <p ng-if="!postDetailsCtrl.isDeleted(post)" ng-bind-html="postDetailsCtrl.recognizeUrl(post).text">
              {{postDetailsCtrl.recognizeUrl(post).text}}
            </p>
          </md-card-content>
          <md-divider></md-divider>
          <md-card-actions layout="row" layout-align="end-center">
              <md-button  ng-if="postDetailsCtrl.showButtonDelete(post)" class="md-icon-button" arial-label="Delete"
                ng-click="postDetailsCtrl.deletePost($event, post, posts)">
                <md-icon>delete</md-icon>
              </md-button>
              <md-button class="md-icon-button" aria-label="Comments" ng-click="postDetailsCtrl.getComments(post)">
                <md-icon>comments</md-icon>
              </md-button>
              <md-button class="post-count md-icon-button md-primary md-hue-1">
                {{ post.number_of_comments }}
              </md-button>
              <md-button class="md-icon-button" aria-label="Favorite" ng-click="postDetailsCtrl.likeOrDislikePost(post)"
                 ng-disabled="postDetailsCtrl.disableButtonLike(post)" ng-class="postDetailsCtrl.isLikedByUser(post)?'md-warn':''">
                <md-icon>grade</md-icon>
              </md-button>
              <md-button class="post-count md-icon-button md-primary md-hue-1" ng-click="postDetailsCtrl.showLikes(post)">
                {{ post.number_of_likes }}
              </md-button>
              <md-button class="md-icon-button" aria-label="editar" ng-click="postDetailsCtrl.editPost(post, posts)"
                ng-if="postDetailsCtrl.showButtonEdit(post)">
                <md-icon>edit</md-icon>
              </md-button>
          </md-card-actions>
          <div layout="row" layout-align="start center">
            <md-list ng-repeat="like in postDetailsCtrl.likes[post.key]" ng-if="postDetailsCtrl.checkCurrentPost(post)">
              <md-list-item>
                <img class="resize" title="{{ like.author }}" ng-src="{{ like.author_img }}"/>
              </md-list-item>
            </md-list>
          </div>
          <md-list>
            <div ng-if="postDetailsCtrl.comments[post.key].show">
              <md-list-item ng-repeat="comment in postDetailsCtrl.comments[post.key].data" class="md-3-line">
                <img ng-src="{{comment.author_img}}" class="md-avatar" alt="{{comment.author_name}}" />
                <div class="md-list-item-text">
                  <h4><b>{{comment.author_name}} - {{comment.institution_name | uppercase}}</b></h4>
                  <small class="md-caption">{{comment.publication_date | date: 'MMM d, y'}} às {{comment.publication_date | date: 'HH:mm'}}</small>
                  <p>{{comment.text}}</p>
                  <md-button class="md-secondary md-icon-button" aria-label="Share"
                    ng-if="postDetailsCtrl.canDeleteComment(comment)"
                    ng-click="postDetailsCtrl.deleteComment($event, post, comment)">
                    <md-icon>delete</md-icon>
                  </md-button>
                </div>
              </md-list-item>
              <md-list-item class="md-3-line" ng-if="!postDetailsCtrl.isDeleted(post)">
                <img ng-src="{{postDetailsCtrl.user.photo_url}}" class="md-avatar" alt="{{postDetailsCtrl.user.name}}" />
                <div class="md-list-item-text">
                  <h3>{{comment.author_name}}</h3>
                  <md-input-container class="md-block">
                    <form ng-submit="postDetailsCtrl.createComment(post)" layout="column">
                      <label>{{postDetailsCtrl.user.name}}</label>
                      <textarea style="max-height: 400px;overflow-y:auto;resize:none;" ng-model="postDetailsCtrl.comments[post.key].newComment" rows="1" md-select-on-focus
                        ng-disabled="postDetailsCtrl.savingComment"></textarea>
                      <div layout="row" layout-align="end center">
                        <md-button ng-show="postDetailsCtrl.comments[post.key].newComment"
                          class="md-raised md-primary" aria-label="postar" type="submit">Escrever</md-button>
                      </div>
                    </form>
                  </md-input-container>
                </div>
              </md-list-item>
            </div>
          </md-list>
        </md-card>
    </div>